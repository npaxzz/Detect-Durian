import streamlit as st
from PIL import Image
from transformers import pipeline
from ultralytics import YOLO

tab1, tab2, tab3 = st.tabs(["‡πÇ‡∏£‡∏Ñ‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô", "‡∏ï‡∏£‡∏ß‡∏à‡∏´‡∏≤‡πÇ‡∏£‡∏Ñ‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô", "AI"])

with tab1:
    # Introduction section
    st.header("‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô")
    st.write("""
    ‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Durian) ‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÉ‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ‡πÄ‡∏≠‡πÄ‡∏ä‡∏µ‡∏¢‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡πÄ‡∏â‡∏µ‡∏¢‡∏á‡πÉ‡∏ï‡πâ ‡πÇ‡∏î‡∏¢‡∏°‡∏µ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß
    ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏Å‡πá‡∏ï‡∏≤‡∏° ‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏±‡∏ö‡πÇ‡∏£‡∏Ñ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏™‡πà‡∏á‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡πÑ‡∏î‡πâ
    """)

    # Disease section
    st.header("‡πÇ‡∏£‡∏Ñ‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô")

    # Disease for Leaves
    st.subheader("‡πÇ‡∏£‡∏Ñ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡∏±‡∏ö‡πÉ‡∏ö")
    st.write("""
    1. **‡πÇ‡∏£‡∏Ñ‡∏à‡∏∏‡∏î‡πÉ‡∏ö‡∏à‡∏≤‡∏Å‡∏™‡∏≤‡∏´‡∏£‡πà‡∏≤‡∏¢ (Algal Leaf Spot)**
    - ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£: ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏ö‡∏ô‡πÉ‡∏ö‡∏à‡∏∞‡∏°‡∏µ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•
    - ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤: ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ fungicides ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏≤‡∏î

    2. **‡πÇ‡∏£‡∏Ñ‡πÉ‡∏ö‡πÑ‡∏´‡∏°‡πâ (Leaf Blight)**
    - ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£: ‡πÉ‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ô‡πà‡∏≤‡πÄ‡∏õ‡∏∑‡πà‡∏≠‡∏¢‡∏à‡∏≤‡∏Å‡∏Ç‡∏≠‡∏ö‡πÉ‡∏ö, ‡πÅ‡∏ú‡∏•‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å‡∏ä‡∏∑‡πâ‡∏ô
    - ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤: ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ fungicides ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ô‡πâ‡∏≥ ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏≠‡∏≤‡∏Å‡∏≤‡∏®

    3. **‡πÇ‡∏£‡∏Ñ‡πÉ‡∏ö‡∏•‡∏≤‡∏¢ (Leaf Spot)**
    - ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£: ‡πÉ‡∏ö‡∏°‡∏µ‡∏à‡∏∏‡∏î‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏• ‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏≤‡∏¢
    - ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤: ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ fungicides ‡∏ï‡∏±‡∏î‡πÅ‡∏ï‡πà‡∏á‡πÉ‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏™‡∏ß‡∏ô
    """)

    # Disease for Tree
    st.subheader("‡πÇ‡∏£‡∏Ñ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡∏±‡∏ö‡∏ï‡πâ‡∏ô")
    st.write("""
    1. **‡πÇ‡∏£‡∏Ñ‡πÄ‡∏ô‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏ï‡πâ‡∏ô (Root Rot Disease)**
    - ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£: ‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï ‡∏£‡∏≤‡∏Å‡πÄ‡∏ô‡πà‡∏≤ ‡πÅ‡∏•‡∏∞‡πÉ‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏´‡∏µ‡πà‡∏¢‡∏ß
    - ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤: ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏Ü‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤‡πÉ‡∏ô‡∏î‡∏¥‡∏ô

    2. **‡πÇ‡∏£‡∏Ñ‡∏ï‡πâ‡∏ô‡πÄ‡∏ô‡πà‡∏≤ (Trunk Rot)**
    - ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£: ‡∏ï‡πâ‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ú‡∏∏‡πÄ‡∏ô‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÄ‡∏´‡∏°‡πá‡∏ô
    - ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤: ‡∏ï‡∏±‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏û‡πà‡∏ô‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ü‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤

    3. **‡πÇ‡∏£‡∏Ñ‡πÉ‡∏ö‡∏ù‡πà‡∏≠ (Canker Disease)**
    - ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£: ‡∏ï‡πâ‡∏ô‡∏°‡∏µ‡πÅ‡∏ú‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å ‡∏ï‡πâ‡∏ô‡∏ù‡πà‡∏≠‡πÅ‡∏•‡∏∞‡πÅ‡∏´‡πâ‡∏á
    - ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤: ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡πÅ‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠
    """)

    # Disease for Root
    st.subheader("‡πÇ‡∏£‡∏Ñ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡∏±‡∏ö‡∏£‡∏≤‡∏Å")
    st.write("""
    1. **‡πÇ‡∏£‡∏Ñ‡∏£‡∏≤‡∏Å‡πÄ‡∏ô‡πà‡∏≤ (Root Rot)**
    - ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£: ‡∏£‡∏≤‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ô‡πà‡∏≤‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏î‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏î‡πâ
    - ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤: ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏î‡∏¥‡∏ô ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ‡∏Ü‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤

    2. **‡πÇ‡∏£‡∏Ñ‡∏î‡∏¥‡∏ô‡πÅ‡∏Ç‡πá‡∏á (Soil Compaction)**
    - ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£: ‡∏£‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡πÑ‡∏î‡πâ ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏î‡∏¥‡∏ô‡πÅ‡∏ô‡πà‡∏ô
    - ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤: ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏£‡πà‡∏ß‡∏ô‡∏ã‡∏∏‡∏¢ ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏ô‡πâ‡∏≥
    """)

    # Additional diseases
    st.subheader("‡πÇ‡∏£‡∏Ñ‡∏≠‡∏∑‡πà‡∏ô‡πÜ")
    st.write("""
    1. **‡πÇ‡∏£‡∏Ñ‡πÑ‡∏ß‡∏£‡∏±‡∏™ (Virus Disease)**
    - ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£: ‡πÉ‡∏ö‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ ‡∏°‡∏µ‡∏•‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏õ‡∏Å‡∏ï‡∏¥
    - ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤: ‡∏ï‡∏±‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏£‡πà‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÅ‡∏°‡∏•‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏≤‡∏´‡∏∞

    2. **‡πÇ‡∏£‡∏Ñ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡πÅ‡∏°‡∏•‡∏á‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏û‡∏∑‡∏ä**
    - ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£: ‡πÉ‡∏ö‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏°‡∏•‡∏á
    - ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤: ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÅ‡∏°‡∏•‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏û‡∏∑‡∏ä
    """)

    # Conclusion
    st.header("‡∏™‡∏£‡∏∏‡∏õ")
    st.write("""
    ‡πÇ‡∏£‡∏Ñ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏ó‡∏µ‡πà‡∏û‡∏ö‡πÉ‡∏ô‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏™‡∏ß‡∏ô ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
    ‡∏Å‡∏≤‡∏£‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÇ‡∏£‡∏Ñ‡πÅ‡∏û‡∏£‡πà‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢
    """)


with tab2:
    st.header("Detect Durian ‡∏ï‡∏£‡∏ß‡∏à‡∏´‡∏≤‡πÇ‡∏£‡∏Ñ‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô")
    st.subheader("‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô")
    st.write("1. ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û (‡πÉ‡∏ö‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô , ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô , ‡∏≠‡∏∑‡πà‡∏ô‡πÜ)")
    st.write("2. ‡∏£‡∏≠‡πÉ‡∏´‡πâ Model ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢")
    st.write("3. Model ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≤‡∏ô‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏™‡∏¥‡πà‡∏á‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥‡πÉ‡∏î‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç")

    ## load Model
    model = YOLO("test_leaf_durian.pt")
    def predict_image(image):
        results = model(image)
        return results

    disease_info = {
        'Algal Leaf Spot': {
            'cause': '‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤ Algae (‡∏™‡∏≤‡∏´‡∏£‡πà‡∏≤‡∏¢)',
            'symptoms': '‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏ö‡∏ô‡πÉ‡∏ö‡∏à‡∏∞‡∏°‡∏µ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•',
            'prevention': '‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ fungicides, ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô, ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏≤‡∏î',
        },
        'Leaf Blight': {
            'cause': '‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤ Phytophthora ‡∏´‡∏£‡∏∑‡∏≠ Alternaria',
            'symptoms': '‡πÉ‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ô‡πà‡∏≤‡πÄ‡∏õ‡∏∑‡πà‡∏≠‡∏¢‡∏à‡∏≤‡∏Å‡∏Ç‡∏≠‡∏ö‡πÉ‡∏ö, ‡πÅ‡∏ú‡∏•‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å‡∏ä‡∏∑‡πâ‡∏ô',
            'prevention': '‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ fungicides, ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ô‡πâ‡∏≥, ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏≠‡∏≤‡∏Å‡∏≤‡∏®',
        },
        'Leaf Spot': {
            'cause': '‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤ Septoria, Alternaria, Cercospora',
            'symptoms': '‡∏à‡∏∏‡∏î‡∏ö‡∏ô‡πÉ‡∏ö‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á, ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•, ‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏≥',
            'prevention': '‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ fungicides, ‡∏ï‡∏±‡∏î‡πÅ‡∏ï‡πà‡∏á‡πÉ‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠',
        },
        'No Disease': {
            'cause': '‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏£‡∏Ñ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û',
            'symptoms': '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥',
            'prevention': '‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏ó‡∏µ‡πà‡∏î‡∏µ',
        }
    }
    
    ## uploaded file
    uploaded_file = st.file_uploader("‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û", type=["jpg", "png", "jpeg"])
    if uploaded_file is not None:
        image = Image.open(uploaded_file)
        ##st.image(image, caption="Uploaded Image", use_container_width=True)

        ## Prediction durian disease
        results = predict_image(image)
        st.subheader("Prediction results:")
        st.image(results[0].plot(), caption="Predicted Image", use_container_width=True)
        
        boxes = results[0].boxes  
        class_names = results[0].names 
        confidences = boxes.conf
        max_confidence_idx = confidences.argmax()  
        max_confidence_class = class_names[int(boxes.cls[max_confidence_idx])] 
        max_confidence_value = confidences[max_confidence_idx]

        st.write(f"‡πÇ‡∏£‡∏Ñ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏Ñ‡∏∑‡∏≠:  **{max_confidence_class}**")
        st.write(f"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢:  **{max_confidence_value*100:.2f}%**")

        if max_confidence_class in disease_info:
            st.write(f"**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** {disease_info[max_confidence_class]['cause']}")
            st.write(f"**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:** {disease_info[max_confidence_class]['symptoms']}")
            st.write(f"**‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤:** {disease_info[max_confidence_class]['prevention']}")
        
with tab3:
    generator = pipeline('text-generation', model='EleutherAI/gpt-neo-2.7B')

    st.title("üí¨ AI Chatbot (No API)")

    if "messages" not in st.session_state:
        st.session_state["messages"] = [{"role": "assistant", "content": "How can I help you?"}]

    for msg in st.session_state.messages:
        st.chat_message(msg["role"]).write(msg["content"])

    if prompt := st.chat_input():
        st.session_state.messages.append({"role": "user", "content": prompt})
        st.chat_message("user").write(prompt)

        response = generator(prompt, max_length=500000000, num_return_sequences=1)

        msg = response[0]['generated_text']

        st.session_state.messages.append({"role": "assistant", "content": msg})
        st.chat_message("assistant").write(msg)